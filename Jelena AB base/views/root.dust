<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>Library</title>
    <link rel="stylesheet" href="/css/library.css">
</head>
<body>
<div id='user-menu'>
    <ul>
        <li class='active'><a href='#'><span>User</span></a></li>
        <li><a href='Login.html'><span>&#9758;Logout</span></a></li>
    </ul>
</div>
<header>
    <h1>AtelierBeats.</h1>
</header>

<div id='main-menu'>
    <ul>
        <li><input id="search" type="search" onkeyup="search()" placeholder="Search..." required></li>
        <li class="active"><a href=Library.html><span>&#9835;Library</span></a></li>
        <li ><a href='Artists.html'><span>&#8788;Artists</span></a></li>
        <li ><a href='Albums.html'><span>&#9836;Albums</span></a></li>
        <button onclick="newPlayList()">New Playlist</button>
        <li ><a href='#'><span>&#8803;Grunge</span></a></li>
        <li ><a href='#'><span>&#8803;Soulfull House</span></a></li>
        <li ><a href='#'><span>&#8803;Deep House</span></a></li>
        <li ><a href='#'><span>&#8803;Jazz</span></a></li>
        <li ><a href='#'><span>&#8803;Rock</span></a></li>
    </ul>

</div>

<section>


<table id="table1">

</table>
</section>
<script src="js/model.js"></script>
<script src="js/library.js"></script>
<script src="js/app.js"></script>
<script>
    document.getElementById("playpause").addEventListener('click', setupPlayer() );

    var mus = document.getElementById('mySong');
    var display=document.getElementById('currentTime');
    mus.addEventListener("timeupdate", function(){display.innerText =mus.currentTime.toFixed(2);},false);

    var time = document.getElementById("totalTime");
    mus.addEventListener('loadedmetadata', function(){var t=((mus.duration)/60).toFixed(2);time.innerHTML=t+" minutes";});
    //Time duration works properly with google chrome.

    function setVolume() {
        var volume = document.getElementById("volume");
        mus.volume = volume.value;
    }

    function search(){
        var text=document.getElementById('search');
        var newTable=document.getElementById("table1");
        var result=fuzzyFind(window.data.Tracks, "name", text.value);
            var newContent = "<tr><th>SONG</th><th><a href=\'Artists.html\'>ARTIST</a></th><th><a href=\'Albums.html\'>ALBUM</a></th><th>TIME</th></tr>";
            for (var i = 0; i < result.length; i++) {
                newContent += "<tr>" + "<td>" + result[i].name + "</td>" + "<td>" + result[i].artist + "</td>" + "<td>" + result[i].album + "</td>" + "<td>" + window.data.Tracks[i].duration + "</td>" + "</tr>";
            }
            newTable.innerHTML = newContent;

    }
    //Exercise 3
    function newPlayList(){
        var pl=new playlist("plnew", "playlist", "newArtist", []);
        savePlaylist(pl);
    }

</script>
<script src="/views/views.js"></script>
</body>
</html>